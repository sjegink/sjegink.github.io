:root {
	--n-game-size: 3;
	--n-board-shadow: 16px;
	--n-board-padding: 8px;
	--n-board-size-by-vh: calc(100vh - 120px);
	--n-board-size-by-vw: 90vw;
	--n-board-size: var(--n-board-size-by-vh);
	--n-box-shadow: 6px;
	--n-box-padding: 4px;
	--n-box-size: calc((var(--n-board-size) - (var(--n-board-padding) * (var(--n-game-size) + 1))) / var(--n-game-size));
	--n-cell-shadow: 2px;
	--n-cell-padding: 2px;
	--n-cell-size: calc((var(--n-box-size) - (var(--n-box-padding) * (var(--n-game-size) + 1))) / var(--n-game-size));
	--c-shadow: #0004;
}
@media(max-width: calc((100vh - 120px) * 10 / 9)){
	:root {
		--n-board-size: var(--n-board-size-by-vw);
	}
}

.x_board {
	width: var(--n-board-size);
	height: var(--n-board-size);
	border-radius: var(--n-board-padding);
	padding: calc(var(--n-board-padding) / 2);
	background-color: inherit;
	box-shadow: 0 calc(var(--n-board-padding) / 2) var(--n-board-shadow) calc(var(--n-board-padding) / 4) var(--c-shadow);
}
.x_board > * {
	padding: calc(var(--n-board-padding) / 2);
}

.box {
	width: 100%; height: 100%;
	border-radius: var(--n-box-padding);
	padding: calc(var(--n-box-padding) / 2);
	background-color: inherit;
	box-shadow: 0 calc(var(--n-box-padding) / 2) var(--n-box-shadow) calc(var(--n-box-padding) / 4) var(--c-shadow);
}
.box > * {
	padding: calc(var(--n-box-padding) / 2);
}

.cell {
	position: relative;
	width: var(--n-cell-size);
	width: 100%; height: 100%;	
	border-radius: var(--n-cell-padding);
	padding: var(--n-cell-padding);
	background-color: inherit;
	box-shadow: 0 calc(var(--n-cell-padding) / 2) var(--n-cell-shadow) calc(var(--n-cell-padding) / 4) var(--c-shadow);
	align-items: center; justify-content: center; text-align: center;
	font-size: 20px;
	transition-duration: 200ms;
}
.cell:hover {
	box-shadow: 0 calc(var(--n-cell-padding) / 4) calc(var(--n-cell-shadow) / 2) calc(var(--n-cell-padding) / 8) var(--c-shadow);
	cursor: pointer;
}
.cell.is-locked {
	box-shadow: inset 0 calc(var(--n-cell-padding) / 2) var(--n-cell-shadow) calc(var(--n-cell-padding) / 4) var(--c-shadow);
	opacity: .7;
	cursor: default;
}
.cell.is-incorrect {
	color: #B00;
}
.cell.is-incorrect:before {
	background: radial-gradient(#F003 10%, #F001 50%, #ff000007 65%, transparent 90%);
}
.cell > span {
	transform: scale(1);
	transition: linear 200ms;
}
.cell:not([data-value]) > span {
	opacity: 0;
}
@media (prefers-color-scheme: light) {
	.cell.accent {
		background-color: #FF0;
	}
}
@media (prefers-color-scheme: dark) {
	.cell:before {
		content: '';
		position:absolute; z-index:-1;
		top:0; bottom:0; left:0; right:0;
		display: block;
		background: radial-gradient(#FF03 10%, #FF01 50%, #ffff0007 65%, transparent 90%);
		opacity: 0;
		transition-duration: 200ms;
	}
	.cell.accent {
		color: #333;
		text-shadow: 0 0 4px #FF0;
	}
	.cell.accent.is-incorrect {
		color: #FF0;
		text-shadow: 0 0 4px #F00;
	}
	.cell.accent:before {
		opacity: 1;
	}
}

.input-layer {
	position: fixed; z-index:1;
	top:0; bottom:0; left:0; right:0;
	transition: linear 250ms;
}
.input-layer:not([target]) {
	opacity: 0;
	pointer-events: none;
	transition-duration: 100ms;
}

.input-layer--outside {
	position: absolute; z-index: 0;
	top:0; bottom:0; left:0; right:0;
	background-color: rgba(0,0,0, .4);
}
.input-layer--inside {
	position: relative;
	display: flex;
	flex-direction: column;
	align-items: center;
}
.input-layer .cell {
	width: var(--n-box-size);
	height: var(--n-box-size);
	background-color: #333;
	border-radius: var(--n-box-padding);
	cursor: default;
	box-shadow: 0 calc(var(--n-box-padding) / 2) var(--n-box-shadow) calc(var(--n-box-padding) / 4) var(--c-shadow);
}
@media (prefers-color-scheme: light) {
	.input-layer .cell {
		background-color: #FFF;
	}
}
.input-layer .guide {
	color: #EEE;
}
.input-layer .candidate-wrapper {
	width: 100vw; height: 20vw;
	overflow-x: scroll;
}
.input-layer .candidate {
	margin: 1vw;
	display: block;
	width: 15vw; height: 15vw; flex-shrink: 0;
	font-size: 10vw;
}
.input-layer .candidate:first-child {
	margin-left: 3vw;
}
.input-layer .candidate:last-child {
	margin-right: 3vw;
}
@media(pointer: fine){
	.if-mobile {
		display: none!important;
	}
}